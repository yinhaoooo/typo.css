tc=# explain  /*+
tc*# Set(enable_hashjoin off)
tc*# Set(enable_mergejoin off)
tc*# Set(enable_material off)
tc*# Set(enable_seqscan off)
tc*# Set(max_parallel_workers_per_gather 0)
tc*# set(from_collapse_limit 23)
tc*# set(join_collapse_limit 23)
tc*# Leading(t_05 t_016 t_08 t_015 t_09 t_020 t_011 t_010 t_014 t_02 t_019 t_01 t_013 t_012 t_07 t_03 t_04 t_018)
tc*#  */
tc-# SELECT  DISTINCT t_01.puid FROM PH6PCBPROBOP t_01 , PIMANRELATION t_02 , PIMANRELATION t_03 , PIMANRELATION t_04 , PH6HWPART t_05 , PITEM t_06 , PWORKSPACEOBJECT t_07 , PSTRUCTURECONTEXT t_08 , PMECOLLABORATIONCONTEXT t_09 , PWORKSPACEOBJECT t_010 , PSTRUCTURECONTEXT t_011 , PIMANRELATION t_012 , PIMANRELATION t_013 , PIMANRELATION t_014 , PIMANRELATION t_015 , PIMANRELATION t_016 , PH6HWPARTREVISION t_017 , PITEMREVISION t_018 , PIMANRELATION t_019 , PIMANRELATION t_020 , vl10n_object_name_text t_021 WHERE ( ( ( ( ( ( t_01.puid = t_012.rsecondary_objectu ) AND ( ( t_012.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_012.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_02.rsecondary_objectu ) AND ( ( t_02.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_02.rprimary_objectu = t_09.puid ) AND ( ( t_09.puid = t_03.rprimary_objectu ) AND ( ( t_03.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_03.rsecondary_objectu = t_08.puid ) AND ( ( t_08.puid = t_04.rprimary_objectu ) AND ( ( t_04.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_04.rsecondary_objectu = t_05.puid ) AND  ( UPPER(t_06.pitem_id)  =  UPPER( 'TRIAL_03025XMA'  )  ) ) ) ) ) ) ) ) ) ) ) ) ) AND ( ( ( t_01.puid = t_013.rsecondary_objectu ) AND ( ( t_013.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_013.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_014.rsecondary_objectu ) AND ( ( t_014.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_014.rprimary_objectu = t_09.puid ) AND ( ( t_09.puid = t_015.rprimary_objectu ) AND ( ( t_015.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_015.rsecondary_objectu = t_08.puid ) AND ( ( t_08.puid = t_016.rprimary_objectu ) AND ( ( t_016.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_016.rsecondary_objectu = t_05.puid ) AND ( ( t_05.puid = t_018.ritems_tagu ) AND  ( UPPER(t_017.ph6DrawingVersion)  =  UPPER( 'A'   )  ) ) ) ) ) ) ) ) ) ) ) ) ) ) AND ( ( t_01.puid = t_019.rsecondary_objectu ) AND ( ( t_019.rrelation_typeu = 'RUftCECe47UIUC'   ) AND ( ( t_019.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_020.rsecondary_objectu ) AND ( ( t_020.rrelation_typeu = 'B0ftCECe47UIUC'   ) AND ( ( t_020.rprimary_objectu = t_09.puid ) AND (  UPPER(t_021.pval_0)  LIKE  UPPER( '%图纸版本A%'   )  AND ( t_021.locale IN  ('NONE'  , 'zh_CN'   ) AND ( ( t_09.puid = t_021.puid ) AND t_021.status IN  ('A'  , 'M'   ) ) ) ) ) ) ) ) ) ) ) ) AND ( t_05.puid = t_06.puid AND t_010.puid = t_011.puid AND t_017.puid = t_018.puid AND t_07.puid = t_08.puid ) ) AND t_07.pobject_type = 'MEProductContext' ) AND t_010.pobject_type = 'MEProcessContext' ) AND (t_02.arev_category IN (48,40)) AND (t_03.arev_category IN (48,40)) AND (t_04.arev_category IN (48,40)) AND (t_012.arev_category IN (48,40)) AND (t_013.arev_category IN (48,40)) AND (t_014.arev_category IN (48,40)) AND (t_015.arev_category IN (48,40)) AND (t_016.arev_category IN (48,40)) AND (t_019.arev_category IN (48,40)) AND (t_020.arev_category IN (48,40));
LOG:  pg_hint_plan:
used hint:
Set(enable_hashjoin off)
Set(enable_material off)
Set(enable_mergejoin off)
Set(enable_seqscan off)
Set(from_collapse_limit 23)
Set(join_collapse_limit 23)
Set(max_parallel_workers_per_gather 0)
not used hint:
Leading(t_05 t_016 t_08 t_015 t_09 t_020 t_011 t_010 t_014 t_02 t_019 t_01 t_013 t_012 t_07 t_03 t_04 t_018)
duplication hint:
error hint:

                                                                                                                                    QUERY PLAN

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------
 Unique  (cost=6580929.31..6580929.32 rows=1 width=15)
   ->  Sort  (cost=6580929.31..6580929.32 rows=1 width=15)
         Sort Key: t_01.puid
         ->  Nested Loop  (cost=10.66..6580929.30 rows=1 width=15)
               Join Filter: ((t_03.rsecondary_objectu)::text = (t_07.puid)::text)
               ->  Nested Loop  (cost=10.09..6580927.74 rows=1 width=90)
                     Join Filter: ((t_03.rsecondary_objectu)::text = (t_08.puid)::text)
                     ->  Nested Loop  (cost=9.66..6580927.28 rows=1 width=75)
                           ->  Nested Loop  (cost=9.23..6580926.82 rows=1 width=180)
                                 ->  Nested Loop  (cost=8.95..6580926.52 rows=1 width=210)
                                       Join Filter: ((t_012.rprimary_objectu)::text = (t_020.rsecondary_objectu)::text)
                                       ->  Nested Loop  (cost=8.38..6580923.79 rows=1 width=302)
                                             ->  Nested Loop  (cost=7.95..6580923.34 rows=1 width=362)
                                                   ->  Nested Loop  (cost=7.38..6580921.91 rows=1 width=332)
                                                         Join Filter: ((t_02.rprimary_objectu)::text = (t_015.rprimary_objectu)::text)
                                                         ->  Nested Loop  (cost=6.82..6580919.19 rows=1 width=302)
                                                               ->  Nested Loop  (cost=6.25..350.45 rows=1 width=270)
                                                                     ->  Nested Loop  (cost=5.68..348.89 rows=1 width=255)
                                                                           ->  Nested Loop  (cost=5.11..347.46 rows=1 width=225)
                                                                                 ->  Nested Loop  (cost=4.68..346.99 rows=1 width=240)
                                                                                       Join Filter: ((t_03.rsecondary_objectu)::text = (t_016.rprimary_objectu)::text)
                                                                                       ->  Nested Loop  (cost=4.12..334.12 rows=9 width=210)
                                                                                             ->  Nested Loop  (cost=3.55..323.42 rows=1 width=180)
                                                                                                   Join Filter: ((t_09.puid)::text = (t_02.rprimary_objectu)::text)
                                                                                                   ->  Nested Loop  (cost=2.98..320.69 rows=1 width=150)
                                                                                                         ->  Nested Loop  (cost=2.69..319.46 rows=4 width=135)
                                                                                                               ->  Nested Loop  (cost=2.13..318.77 rows=1 width=105)
                                                                                                                     ->  Nested Loop  (cost=1.57..316.03 rows=1 width=75)
                                                                                                                           ->  Nested Loop  (cost=1.00..308.50 rows=1 width=45)
                                                                                                                                 ->  Index Scan using pipitem_0 on pitem t_06  (cost=0.43..2.65 rows=1 width=15)
                                                                                                                                       Index Cond: (upper((pitem_id)::text) = 'TRIAL_03025XMA'::text)
                                                                                                                                 ->  Index Scan using pipimanrelation_4 on pimanrelation t_04  (cost=0.57..305.75 rows=10 width=30)
                                                                                                                                       Index Cond: ((rsecondary_objectu)::text = (t_06.puid)::text)
                                                                                                                                       Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIU
C'::text))
                                                                                                                           ->  Index Scan using pipimanrelation_4 on pimanrelation t_03  (cost=0.57..7.52 rows=1 width=30)
                                                                                                                                 Index Cond: ((rsecondary_objectu)::text = (t_04.rprimary_objectu)::text)
                                                                                                                                 Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::te
xt))
                                                                                                                     ->  Index Scan using pipimanrelation_3 on pimanrelation t_014  (cost=0.57..2.73 rows=1 width=30)
                                                                                                                           Index Cond: (((rprimary_objectu)::text = (t_03.rprimary_objectu)::text) AND ((rrelation_typeu)::text = 'B0ftCE
Ce47UIUC'::text))
                                                                                                                           Filter: (arev_category = ANY ('{48,40}'::bigint[]))
                                                                                                               ->  Index Only Scan using pipitemrevision_4 on pitemrevision t_018  (cost=0.56..0.65 rows=4 width=30)
                                                                                                                     Index Cond: (ritems_tagu = (t_04.rsecondary_objectu)::text)
                                                                                                         ->  Index Only Scan using pipmecollaborationcontext on pmecollaborationcontext t_09  (cost=0.29..0.31 rows=1 width=15)
                                                                                                               Index Cond: (puid = (t_03.rprimary_objectu)::text)
                                                                                                   ->  Index Scan using pipimanrelation_12 on pimanrelation t_02  (cost=0.57..2.72 rows=1 width=30)
                                                                                                         Index Cond: (((rprimary_objectu)::text = (t_014.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_014.rsecondary_obj
ectu)::text))
                                                                                                         Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                                                                             ->  Index Scan using pipimanrelation_3 on pimanrelation t_012  (cost=0.57..10.61 rows=9 width=30)
                                                                                                   Index Cond: (((rprimary_objectu)::text = (t_02.rsecondary_objectu)::text) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                                                                   Filter: (arev_category = ANY ('{48,40}'::bigint[]))
                                                                                       ->  Index Scan using pipimanrelation_12 on pimanrelation t_016  (cost=0.57..1.42 rows=1 width=30)
                                                                                             Index Cond: (((rprimary_objectu)::text = (t_04.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_04.rsecondary_objectu)::text))
                                                                                             Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                                                 ->  Index Scan using piph6hwpartrevision on ph6hwpartrevision t_017  (cost=0.43..0.47 rows=1 width=15)
                                                                                       Index Cond: ((puid)::text = (t_018.puid)::text)
                                                                                       Filter: (upper((ph6drawingversion)::text) = 'A'::text)
                                                                           ->  Index Scan using pipimanrelation_12 on pimanrelation t_019  (cost=0.57..1.42 rows=1 width=30)
                                                                                 Index Cond: (((rprimary_objectu)::text = (t_012.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_012.rsecondary_objectu)::text))
                                                                                 Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                                     ->  Index Scan using pipworkspaceobject on pworkspaceobject t_010  (cost=0.57..1.56 rows=1 width=15)
                                                                           Index Cond: ((puid)::text = (t_012.rprimary_objectu)::text)
                                                                           Filter: ((pobject_type)::text = 'MEProcessContext'::text)
                                                               ->  Append  (cost=0.57..6580568.34 rows=40 width=32)
                                                                     ->  Subquery Scan on "*SELECT* 1"  (cost=0.57..6580567.83 rows=39 width=32)
                                                                           Filter: ((t_02.rprimary_objectu)::text = "*SELECT* 1".puid)
                                                                           ->  Index Scan using pworkspaceobject_7 on pworkspaceobject  (cost=0.57..6580470.76 rows=7765 width=192)
                                                                                 Index Cond: (vla_691_23 = 0)
                                                                                 Filter: ((pobject_name IS NOT NULL) AND (upper((pobject_name)::text) ~~ '%图纸版本A%'::text))
                                                                     ->  Index Scan using pipl10n_object_name on pl10n_object_name  (cost=0.27..0.31 rows=1 width=32)
                                                                           Index Cond: ((puid)::text = (t_02.rprimary_objectu)::text)
                                                                           Filter: ((substr((pval_0)::text, 1, 5) = ANY ('{NONE,zh_CN}'::text[])) AND (substr((pval_0)::text, 9, 1) = ANY ('{A,M}'::text[])) AND (upper(substr((pval_0)::
text, 49, 128)) ~~ '%图纸版本A%'::text))
                                                         ->  Index Scan using pipimanrelation_12 on pimanrelation t_015  (cost=0.57..2.72 rows=1 width=30)
                                                               Index Cond: (((rprimary_objectu)::text = (t_03.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_03.rsecondary_objectu)::text))
                                                               Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                                   ->  Index Scan using pipimanrelation_12 on pimanrelation t_013  (cost=0.57..1.42 rows=1 width=30)
                                                         Index Cond: (((rprimary_objectu)::text = (t_012.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_012.rsecondary_objectu)::text))
                                                         Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                             ->  Index Only Scan using piph6hwpart on ph6hwpart t_05  (cost=0.43..0.45 rows=1 width=15)
                                                   Index Cond: (puid = (t_04.rsecondary_objectu)::text)
                                       ->  Index Scan using pipimanrelation_12 on pimanrelation t_020  (cost=0.57..2.72 rows=1 width=30)
                                             Index Cond: (((rprimary_objectu)::text = (t_02.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_02.rsecondary_objectu)::text))
                                             Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                 ->  Index Only Scan using piph6pcbprobop on ph6pcbprobop t_01  (cost=0.29..0.31 rows=1 width=15)
                                       Index Cond: (puid = (t_012.rsecondary_objectu)::text)
                           ->  Index Only Scan using pipstructurecontext on pstructurecontext t_011  (cost=0.43..0.45 rows=1 width=15)
                                 Index Cond: (puid = (t_012.rprimary_objectu)::text)
                     ->  Index Only Scan using pipstructurecontext on pstructurecontext t_08  (cost=0.43..0.45 rows=1 width=15)
                           Index Cond: (puid = (t_04.rprimary_objectu)::text)
               ->  Index Scan using pipworkspaceobject on pworkspaceobject t_07  (cost=0.57..1.55 rows=1 width=15)
                     Index Cond: ((puid)::text = (t_08.puid)::text)
                     Filter: ((pobject_type)::text = 'MEProductContext'::text)
(91 rows)

Time: 248.818 ms

