LOG:  pg_hint_plan:
used hint:
Set(enable_hashjoin off)
Set(enable_indexonlyscan off)
Set(enable_material off)
Set(enable_mergejoin off)
Parallel(t_01 0 hard)
Parallel(t_010 0 hard)
Parallel(t_011 0 hard)
Parallel(t_012 0 hard)
Parallel(t_013 0 hard)
Parallel(t_014 0 hard)
Parallel(t_015 0 hard)
Parallel(t_016 0 hard)
Parallel(t_017 0 hard)
Parallel(t_018 0 hard)
Parallel(t_019 0 hard)
Parallel(t_02 0 hard)
Parallel(t_020 0 hard)
Parallel(t_021 20 hard)
Parallel(t_03 0 hard)
Parallel(t_04 0 hard)
Parallel(t_05 0 hard)
Parallel(t_06 0 hard)
Parallel(t_07 0 hard)
Parallel(t_08 0 hard)
Parallel(t_09 0 hard)
not used hint:
duplication hint:
error hint:

LOG:  duration: 5527.732 ms  statement: explain analyze /*+
Set(enable_hashjoin off)
Set(enable_mergejoin off)
Set(enable_material off)
Set(enable_indexonlyscan off)
Parallel(t_01 0 hard)
Parallel(t_02 0 hard)
Parallel(t_03 0 hard)
Parallel(t_04 0 hard)
Parallel(t_05 0 hard)
Parallel(t_06 0 hard)
Parallel(t_07 0 hard)
Parallel(t_08 0 hard)
Parallel(t_09 0 hard)
Parallel(t_010 0 hard)
Parallel(t_011 0 hard)
Parallel(t_012 0 hard)
Parallel(t_013 0 hard)
Parallel(t_014 0 hard)
Parallel(t_015 0 hard)
Parallel(t_016 0 hard)
Parallel(t_017 0 hard)
Parallel(t_018 0 hard)
Parallel(t_019 0 hard)
Parallel(t_020 0 hard)
Parallel(t_021 20 hard)
 */
SELECT  DISTINCT t_01.puid FROM PH6PCBPROBOP t_01 , PIMANRELATION t_02 , PIMANRELATION t_03 , PIMANRELATION t_04 , PH6HWPART t_05 , PITEM t_06 , PWORKSPACEOBJECT t_07 , PSTRUCTURECONTEXT t_08 , PMECOLLABORATIONCONTEXT t_09 , PWORKSPACEOBJECT t_010 , PSTRUCTURECONTEXT t_011 , PIMANRELATION t_012 , PIMANRELATION t_013 , PIMANRELATION t_014 , PIMANRELATION t_015 , PIMANRELATION t_016 , PH6HWPARTREVISION t_017 , PITEMREVISION t_018 , PIMANRELATION t_019 , PIMANRELATION t_020 , vl10n_object_name_text t_021 WHERE ( ( ( ( ( ( t_01.puid = t_012.rsecondary_objectu ) AND ( ( t_012.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_012.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_02.rsecondary_objectu ) AND ( ( t_02.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_02.rprimary_objectu = t_09.puid ) AND ( ( t_09.puid = t_03.rprimary_objectu ) AND ( ( t_03.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_03.rsecondary_objectu = t_08.puid ) AND ( ( t_08.puid = t_04.rprimary_objectu ) AND ( ( t_04.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_04.rsecondary_objectu = t_05.puid ) AND  ( UPPER(t_06.pitem_id)  =  UPPER( 'TRIAL_03025XMA'  )  ) ) ) ) ) ) ) ) ) ) ) ) ) AND ( ( ( t_01.puid = t_013.rsecondary_objectu ) AND ( ( t_013.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_013.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_014.rsecondary_objectu ) AND ( ( t_014.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_014.rprimary_objectu = t_09.puid ) AND ( ( t_09.puid = t_015.rprimary_objectu ) AND ( ( t_015.rrelation_typeu = 'B0ftCECe47UIUC'  ) AND ( ( t_015.rsecondary_objectu = t_08.puid ) AND ( ( t_08.puid = t_016.rprimary_objectu ) AND ( ( t_016.rrelation_typeu = 'RUftCECe47UIUC'  ) AND ( ( t_016.rsecondary_objectu = t_05.puid ) AND ( ( t_05.puid = t_018.ritems_tagu ) AND  ( UPPER(t_017.ph6DrawingVersion)  =  UPPER( 'A'   )  ) ) ) ) ) ) ) ) ) ) ) ) ) ) AND ( ( t_01.puid = t_019.rsecondary_objectu ) AND ( ( t_019.rrelation_typeu = 'RUftCECe47UIUC'   ) AND ( ( t_019.rprimary_objectu = t_011.puid ) AND ( ( t_011.puid = t_020.rsecondary_objectu ) AND ( ( t_020.rrelation_typeu = 'B0ftCECe47UIUC'   ) AND ( ( t_020.rprimary_objectu = t_09.puid ) AND (  UPPER(t_021.pval_0)  LIKE  UPPER( '%图纸版本A%'   )  AND ( t_021.locale IN  ('NONE'  , 'zh_CN'   ) AND ( ( t_09.puid = t_021.puid ) AND t_021.status IN  ('A'  , 'M'   ) ) ) ) ) ) ) ) ) ) ) ) AND ( t_05.puid = t_06.puid AND t_010.puid = t_011.puid AND t_017.puid = t_018.puid AND t_07.puid = t_08.puid ) ) AND t_07.pobject_type = 'MEProductContext' ) AND t_010.pobject_type = 'MEProcessContext' ) AND (t_02.arev_category IN (48,40)) AND (t_03.arev_category IN (48,40)) AND (t_04.arev_category IN (48,40)) AND (t_012.arev_category IN (48,40)) AND (t_013.arev_category IN (48,40)) AND (t_014.arev_category IN (48,40)) AND (t_015.arev_category IN (48,40)) AND (t_016.arev_category IN (48,40)) AND (t_019.arev_category IN (48,40)) AND (t_020.arev_category IN (48,40));
                                                                                                                                QUERY PLAN

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------
 Unique  (cost=4404880.42..4404880.43 rows=1 width=15) (actual time=5209.544..5256.563 rows=1 loops=1)
   ->  Sort  (cost=4404880.42..4404880.42 rows=1 width=15) (actual time=5209.543..5256.559 rows=6 loops=1)
         Sort Key: t_01.puid
         Sort Method: quicksort  Memory: 25kB
         ->  Nested Loop  (cost=1010.09..4404880.41 rows=1 width=15) (actual time=5209.278..5256.545 rows=6 loops=1)
               Join Filter: (((t_012.rprimary_objectu)::text = (t_02.rsecondary_objectu)::text) AND ((t_09.puid)::text = (t_02.rprimary_objectu)::text))
               ->  Nested Loop  (cost=1009.53..4404877.68 rows=1 width=227) (actual time=5209.266..5256.510 rows=6 loops=1)
                     Join Filter: ((t_09.puid)::text = (t_015.rprimary_objectu)::text)
                     ->  Nested Loop  (cost=1008.96..4404874.95 rows=1 width=287) (actual time=5209.256..5256.477 rows=6 loops=1)
                           Join Filter: (((t_03.rsecondary_objectu)::text = (t_04.rprimary_objectu)::text) AND ((t_05.puid)::text = (t_04.rsecondary_objectu)::text))
                           ->  Nested Loop  (cost=1008.39..4404873.52 rows=1 width=332) (actual time=5209.243..5256.441 rows=6 loops=1)
                                 ->  Nested Loop  (cost=1007.96..4404873.06 rows=1 width=317) (actual time=5209.227..5256.407 rows=6 loops=1)
                                       ->  Nested Loop  (cost=1007.53..4404872.59 rows=1 width=332) (actual time=5209.209..5256.349 rows=6 loops=1)
                                             Join Filter: (((t_012.rprimary_objectu)::text = (t_014.rsecondary_objectu)::text) AND ((t_09.puid)::text = (t_014.rprimary_objectu)::text))
                                             ->  Nested Loop  (cost=1006.96..4404869.86 rows=1 width=302) (actual time=5209.191..5256.305 rows=6 loops=1)
                                                   ->  Nested Loop  (cost=1006.68..4404869.55 rows=1 width=287) (actual time=5209.176..5256.276 rows=6 loops=1)
                                                         Join Filter: ((t_01.puid)::text = (t_013.rsecondary_objectu)::text)
                                                         ->  Nested Loop  (cost=1006.11..4404868.12 rows=1 width=302) (actual time=5209.165..5256.241 rows=6 loops=1)
                                                               Join Filter: ((t_03.rsecondary_objectu)::text = (t_07.puid)::text)
                                                               ->  Nested Loop  (cost=1005.54..4404861.86 rows=4 width=287) (actual time=5209.154..5256.205 rows=6 loops=1)
                                                                     Join Filter: ((t_05.puid)::text = (t_018.ritems_tagu)::text)
                                                                     ->  Nested Loop  (cost=1004.98..4404861.07 rows=1 width=257) (actual time=5209.132..5256.170 rows=1 loops=1)
                                                                           Join Filter: ((t_01.puid)::text = (t_019.rsecondary_objectu)::text)
                                                                           ->  Nested Loop  (cost=1004.41..4404859.64 rows=1 width=227) (actual time=5209.113..5256.150 rows=1 loops=1)
                                                                                 ->  Nested Loop  (cost=1004.13..4404856.90 rows=9 width=212) (actual time=5209.050..5256.121 rows=3 loops=1)
                                                                                       ->  Nested Loop  (cost=1003.56..4404846.20 rows=1 width=182) (actual time=5209.017..5256.077 rows=2 loops=1)
                                                                                             ->  Nested Loop  (cost=1002.99..4404843.48 rows=1 width=167) (actual time=5208.972..5256.008 rows=3 loops=1)
                                                                                                   ->  Nested Loop  (cost=1002.42..4404840.74 rows=1 width=137) (actual time=5208.938..5255.971 rows=1 loops=1)
                                                                                                         Join Filter: ("*SELECT* 1".puid = (t_03.rprimary_objectu)::text)
                                                                                                         Rows Removed by Join Filter: 23345
                                                                                                         ->  Nested Loop  (cost=2.42..30.09 rows=1 width=105) (actual time=0.080..0.088 rows=1 loops=1)
                                                                                                               ->  Nested Loop  (cost=1.86..15.06 rows=2 width=75) (actual time=0.066..0.071 rows=1 loops=1)
                                                                                                                     ->  Nested Loop  (cost=1.43..14.14 rows=2 width=60) (actual time=0.052..0.057 rows=1 loops=1)
                                                                                                                           ->  Nested Loop  (cost=0.86..5.30 rows=1 width=30) (actual time=0.034..0.036 rows=1 loops=1)
                                                                                                                                 ->  Index Scan using pipitem_0 on pitem t_06  (cost=0.43..2.65 rows=1 width=15) (actual time=0.017..0.01
9 rows=1 loops=1)
                                                                                                                                       Index Cond: (upper((pitem_id)::text) = 'TRIAL_03025XMA'::text)
                                                                                                                                 ->  Index Scan using piph6hwpart on ph6hwpart t_05  (cost=0.43..2.65 rows=1 width=15) (actual time=0.013
..0.013 rows=1 loops=1)
                                                                                                                                       Index Cond: ((puid)::text = (t_06.puid)::text)
                                                                                                                           ->  Index Scan using pipimanrelation_4 on pimanrelation t_016  (cost=0.57..8.75 rows=10 width=30) (actual time
=0.018..0.019 rows=1 loops=1)
                                                                                                                                 Index Cond: ((rsecondary_objectu)::text = (t_05.puid)::text)
                                                                                                                                 Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::te
xt))
                                                                                                                     ->  Index Scan using pipstructurecontext on pstructurecontext t_08  (cost=0.43..0.46 rows=1 width=15) (actual time=0
.012..0.013 rows=1 loops=1)
                                                                                                                           Index Cond: ((puid)::text = (t_016.rprimary_objectu)::text)
                                                                                                               ->  Index Scan using pipimanrelation_4 on pimanrelation t_03  (cost=0.57..7.50 rows=1 width=30) (actual time=0.014..0.015
rows=1 loops=1)
                                                                                                                     Index Cond: ((rsecondary_objectu)::text = (t_08.puid)::text)
                                                                                                                     Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                                                                                         ->  Gather  (cost=1000.00..4404713.56 rows=7767 width=32) (actual time=52.554..5252.961 rows=23346 loops=1)
                                                                                                               Workers Planned: 20
                                                                                                               Workers Launched: 20
                                                                                                               ->  Parallel Append  (cost=0.00..4402936.86 rows=7771 width=32) (actual time=153.469..5202.019 rows=1112 loops=21)
                                                                                                                     ->  Subquery Scan on "*SELECT* 1"  (cost=0.00..4402898.01 rows=7766 width=32) (actual time=153.464..5201.798 rows=11
12 loops=21)
                                                                                                                           ->  Parallel Seq Scan on pworkspaceobject  (cost=0.00..4402820.35 rows=1942 width=192) (actual time=153.463..5
201.584 rows=1112 loops=21)
                                                                                                                                 Filter: ((pobject_name IS NOT NULL) AND (vla_691_23 = 0) AND (upper((pobject_name)::text) ~~ '%图纸版本A
%'::text))
                                                                                                                                 Rows Removed by Filter: 5439728
                                                                                                                     ->  Parallel Index Scan using pipl10n_object_name_3 on pl10n_object_name  (cost=0.00..0.00 rows=1 width=32) (actual
time=0.071..0.072 rows=0 loops=1)
                                                                                                                           Index Cond: (substr((pval_0)::text, 1, 5) = ANY ('{NONE,zh_CN}'::text[]))
                                                                                                                           Filter: ((substr((pval_0)::text, 9, 1) = ANY ('{A,M}'::text[])) AND (upper(substr((pval_0)::text, 49, 128)) ~~
 '%图纸版本A%'::text))
                                                                                                                           Rows Removed by Filter: 36
                                                                                                   ->  Index Scan using pipimanrelation_3 on pimanrelation t_020  (cost=0.57..2.73 rows=1 width=30) (actual time=0.029..0.032 rows=3 loop
s=1)
                                                                                                         Index Cond: (((rprimary_objectu)::text = (t_03.rprimary_objectu)::text) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                                                                                         Filter: (arev_category = ANY ('{48,40}'::bigint[]))
                                                                                             ->  Index Scan using pipworkspaceobject on pworkspaceobject t_010  (cost=0.57..2.71 rows=1 width=15) (actual time=0.021..0.021 rows=1 loops=
3)
                                                                                                   Index Cond: ((puid)::text = (t_020.rsecondary_objectu)::text)
                                                                                                   Filter: ((pobject_type)::text = 'MEProcessContext'::text)
                                                                                                   Rows Removed by Filter: 0
                                                                                       ->  Index Scan using pipimanrelation_3 on pimanrelation t_012  (cost=0.57..10.61 rows=9 width=30) (actual time=0.018..0.018 rows=2 loops=2)
                                                                                             Index Cond: (((rprimary_objectu)::text = (t_020.rsecondary_objectu)::text) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                                                             Filter: (arev_category = ANY ('{48,40}'::bigint[]))
                                                                                 ->  Index Scan using piph6pcbprobop on ph6pcbprobop t_01  (cost=0.29..0.31 rows=1 width=15) (actual time=0.008..0.008 rows=0 loops=3)
                                                                                       Index Cond: ((puid)::text = (t_012.rsecondary_objectu)::text)
                                                                           ->  Index Scan using pipimanrelation_12 on pimanrelation t_019  (cost=0.57..1.42 rows=1 width=30) (actual time=0.014..0.014 rows=1 loops=1)
                                                                                 Index Cond: (((rprimary_objectu)::text = (t_012.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_012.rsecondary_objectu)::text))
                                                                                 Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                                     ->  Index Scan using pipitemrevision_0 on pitemrevision t_018  (cost=0.56..0.73 rows=4 width=30) (actual time=0.016..0.026 rows=6 loops=1)
                                                                           Index Cond: ((ritems_tagu)::text = (t_016.rsecondary_objectu)::text)
                                                               ->  Index Scan using pipworkspaceobject on pworkspaceobject t_07  (cost=0.57..1.55 rows=1 width=15) (actual time=0.004..0.004 rows=1 loops=6)
                                                                     Index Cond: ((puid)::text = (t_08.puid)::text)
                                                                     Filter: ((pobject_type)::text = 'MEProductContext'::text)
                                                         ->  Index Scan using pipimanrelation_12 on pimanrelation t_013  (cost=0.57..1.42 rows=1 width=30) (actual time=0.004..0.004 rows=1 loops=6)
                                                               Index Cond: (((rprimary_objectu)::text = (t_012.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_012.rsecondary_objectu)::text))
                                                               Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                                                   ->  Index Scan using pipmecollaborationcontext on pmecollaborationcontext t_09  (cost=0.29..0.31 rows=1 width=15) (actual time=0.003..0.003 rows=1 loops=6)
                                                         Index Cond: ((puid)::text = (t_03.rprimary_objectu)::text)
                                             ->  Index Scan using pipimanrelation_12 on pimanrelation t_014  (cost=0.57..2.72 rows=1 width=30) (actual time=0.005..0.005 rows=1 loops=6)
                                                   Index Cond: (((rprimary_objectu)::text = (t_020.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_020.rsecondary_objectu)::text))
                                                   Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
                                       ->  Index Scan using piph6hwpartrevision on ph6hwpartrevision t_017  (cost=0.43..0.47 rows=1 width=15) (actual time=0.008..0.008 rows=1 loops=6)
                                             Index Cond: ((puid)::text = (t_018.puid)::text)
                                             Filter: (upper((ph6drawingversion)::text) = 'A'::text)
                                 ->  Index Scan using pipstructurecontext on pstructurecontext t_011  (cost=0.43..0.46 rows=1 width=15) (actual time=0.004..0.004 rows=1 loops=6)
                                       Index Cond: ((puid)::text = (t_012.rprimary_objectu)::text)
                           ->  Index Scan using pipimanrelation_12 on pimanrelation t_04  (cost=0.57..1.41 rows=1 width=30) (actual time=0.004..0.004 rows=1 loops=6)
                                 Index Cond: (((rprimary_objectu)::text = (t_08.puid)::text) AND ((rsecondary_objectu)::text = (t_018.ritems_tagu)::text))
                                 Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'RUftCECe47UIUC'::text))
                     ->  Index Scan using pipimanrelation_12 on pimanrelation t_015  (cost=0.57..2.72 rows=1 width=30) (actual time=0.004..0.004 rows=1 loops=6)
                           Index Cond: (((rprimary_objectu)::text = (t_03.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_03.rsecondary_objectu)::text))
                           Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
               ->  Index Scan using pipimanrelation_12 on pimanrelation t_02  (cost=0.57..2.72 rows=1 width=30) (actual time=0.004..0.005 rows=1 loops=6)
                     Index Cond: (((rprimary_objectu)::text = (t_014.rprimary_objectu)::text) AND ((rsecondary_objectu)::text = (t_014.rsecondary_objectu)::text))
                     Filter: ((arev_category = ANY ('{48,40}'::bigint[])) AND ((rrelation_typeu)::text = 'B0ftCECe47UIUC'::text))
 Planning Time: 269.334 ms
 Execution Time: 5256.744 ms
(102 rows)

Time: 5527.966 ms (00:05.528)

